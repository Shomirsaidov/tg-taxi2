"use strict";(self["webpackChunktaxi"]=self["webpackChunktaxi"]||[]).push([[594],{6228:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var o=s(6768);const l={class:"cover font-bold min-h-screen flex flex-col items-center justify-center gap-4 p-4"};function a(t,e,s,a,r,n){return(0,o.uX)(),(0,o.CE)("div",l,e[0]||(e[0]=[(0,o.Lk)("div",{class:"scroll p-4 space-y-4 text-xl text-start text-white font-semibold"},[(0,o.Lk)("p",null," Telegram Taxi это децентрализованная платформа такси, которая позволяет пассажирам и водителям напрямую взаимодействовать друг с другом. "),(0,o.Lk)("p",null," Платформа не требует лицензирования и контроля со стороны государства, что снижает административные барьеры для входа в бизнес и открывает новые возможности для конкуренции, а также позволяет водителям и пассажирам получать больше выгоды от сотрудничества.  "),(0,o.Lk)("p",null," Пассажиры могут выбрать такси, частный автомобиль, или мотоцикл, а также могут устанавливать свои собственные цены. ")],-1)]))}var r={name:"About"},n=s(1241);const i=(0,n.A)(r,[["render",a]]);var d=i},4071:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var o=s(6768);const l={class:"cover min-h-screen flex flex-col items-center justify-center gap-6 p-6 bg-blue-400"};function a(t,e,s,a,r,n){return(0,o.uX)(),(0,o.CE)("div",l,e[0]||(e[0]=[(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("h1",{class:"text-white text-2xl font-bold mb-2"},"Приложение iOS Telegram Taxi находятся в стадии разработки. Мы уведомим вас, как только будет готово!")],-1),(0,o.Lk)("button",{class:"w-full max-w-md font-bold bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl"}," Закрыть ",-1)]))}var r={name:"Apps"},n=s(1241);const i=(0,n.A)(r,[["render",a]]);var d=i},2537:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var o=s(6768);const l={class:"cover min-h-screen flex flex-col items-center justify-center gap-6 p-6 bg-blue-400"};function a(t,e,s,a,r,n){return(0,o.uX)(),(0,o.CE)("div",l,e[0]||(e[0]=[(0,o.Fv)('<div class="text-center"><h1 class="text-white text-2xl font-bold mb-2">Ваша поддержка поможет сделать Telegram Taxi лучше для всех!</h1><p class="text-white text-lg">Пожертвуйте сейчас и помогите построить будущее транспорта</p></div><button class="w-full max-w-md font-bold bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl"> Пожертвовать на развитие </button><button class="w-full max-w-md font-bold bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl"> Пожертвовать на маркетинг </button><button class="w-full max-w-md font-bold bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl"> Юридическая поддержка </button><button class="w-full max-w-md font-bold bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl"> По вашему усмотрению </button><button class="w-full max-w-md font-bold bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl"> Закрыть </button>',6)]))}var r={name:"DonationScreen"},n=s(1241);const i=(0,n.A)(r,[["render",a]]);var d=i},9527:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});var o=s(6768),l=s(4232),a=s(7057),r=s(9915);const n={class:"my-bg min-h-screen p-4"},i={key:0,class:"flex flex-col min-h-screen justify-center items-center h-full my-bg rounded-t-xl"},d={class:"flex justify-between items-center mb-2"},c={class:"text-sm text-gray-500"},u={class:"space-y-3 my-4"},h={class:"flex items-center space-x-3"},p={class:"text-start"},b={class:"flex items-center space-x-3"},m={class:"text-start"},f={class:"flex justify-between"},g={class:"text-blue-500 text-start text-lg font-semibold mt-2"},x=["onClick"],y={key:2,class:"flex justify-center my-4"},v=["disabled"],_={key:0,class:"flex flex-col justify-center items-center h-full rounded-t-xl"},k={key:1,class:"font-bold text-xl"};function w(t,e,s,w,$,L){return(0,o.uX)(),(0,o.CE)("div",n,[$.history?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",i,e[1]||(e[1]=[(0,o.Lk)("div",{class:"flex items-center justify-center"},[(0,o.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-e-4 border-blue-500"})],-1)]))),$.history?((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)($.history,((t,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"bg-white rounded-lg border-b-2 border-gray-400 mb-4 p-4"},[(0,o.Lk)("div",d,[(0,o.Lk)("span",c,(0,l.v_)(t.data.date),1)]),(0,o.Lk)("div",u,[(0,o.Lk)("div",h,[e[2]||(e[2]=(0,o.Lk)("img",{src:a,alt:""},null,-1)),(0,o.Lk)("div",p,(0,l.v_)(t.data.address_from),1)]),(0,o.Lk)("div",b,[e[3]||(e[3]=(0,o.Lk)("img",{src:r,alt:""},null,-1)),(0,o.Lk)("div",m,(0,l.v_)(t.data.address_to),1)])]),(0,o.Lk)("div",f,[(0,o.Lk)("p",g,(0,l.v_)(t.data.sum)+" "+(0,l.v_)(t.data.currency),1),(0,o.Lk)("button",{class:"text-blue-800",onClick:e=>L.repeatTrip(t)},(0,l.v_)(this.$store.state.langLoaded.rout_repeat),9,x)])])))),128)):(0,o.Q3)("",!0),$.hasMore?((0,o.uX)(),(0,o.CE)("div",y,[(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>L.loadHistory&&L.loadHistory(...t)),class:"bg-blue-500 text-white px-6 py-2 rounded-full hover:bg-blue-600",disabled:$.loading},[$.loading?((0,o.uX)(),(0,o.CE)("div",_,e[4]||(e[4]=[(0,o.Lk)("div",{class:"flex items-center justify-center"},[(0,o.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-t-4 border-e-4 border-white"})],-1)]))):((0,o.uX)(),(0,o.CE)("span",k,">"))],8,v)])):(0,o.Q3)("",!0)])}s(4114);var $=s(4373),L={data(){return{history:[],page:1,hasMore:!0,loading:!1}},async mounted(){const t=await $.A.post("https://server.telegramtaxi.com/api/check-order/",{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id});this.$store.state.langLoaded=t.data.lang_text,await this.loadHistory()},methods:{async loadHistory(){if(this.loading||!this.hasMore)return;this.loading=!0;const t=await $.A.post("https://server.telegramtaxi.com/api/history/",{tg_id:this.$route.query.tg_id,page:this.page}),e=t.data.result||[];0===e.length?this.hasMore=!1:(this.history=[...this.history,...e],this.page++),this.loading=!1},async repeatTrip(t){let e=await $.A.post("https://server.telegramtaxi.com/api/get-place-details/",{place_id:t.data.place_id_from,lang_code:"ru"});this.$store.state.startPoint={title:e.data.street+", "+e.data.city,lat:e.data.lat,lon:e.data.lon,place_id:e.data.place_id},e=await $.A.post("https://server.telegramtaxi.com/api/get-place-details/",{place_id:t.data.place_id_to,lang_code:"ru"}),this.$store.state.chooseMode="end",this.$store.state.endPoint={title:e.data.street+", "+e.data.city,lat:e.data.lat,lon:e.data.lon,place_id:e.data.place_id},this.$router.push(`/repeat?tg_id=${this.$route.query.tg_id}&uid=${this.$route.query.uid}`)}}},O=s(1241);const P=(0,O.A)(L,[["render",w]]);var C=P},5228:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var o=s(6768);const l={class:"cover min-h-screen flex flex-col pt-8 gap-6 p-6 bg-blue-400"};function a(t,e,s,a,r,n){return(0,o.uX)(),(0,o.CE)("div",l,e[0]||(e[0]=[(0,o.Fv)('<div class="text-start space-y-6 text-center"><p class="text-white text-lg">Привет, Анастасия!</p><p class="text-white text-lg">Мы рады приветствовать Вас в нашей команде Telegram Taxi.</p><p class="text-white text-lg">Уверены, вместе мы добьемся огромных успехов!</p><p class="text-white text-lg font-bold">Баланс вознаграждения: 0.0 ₮</p><p class="text-white text-lg font-bold">Ваша уникальная ссылка:</p><div class="bg-blue-600 text-white rounded-xl p-2">https://t.me/Telegra_taxi_bot?start=363845633 </div></div><div class="grid font-bold grid-cols-2 gap-3"><button class="w-full bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none rounded-xl text-my-blue shadow-xl"> Вывод средств </button><button class="w-full bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none rounded-xl text-my-blue shadow-xl"> Создать рекламу </button><button class="w-full bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none rounded-xl text-my-blue shadow-xl"> Активные партнеры </button><button class="w-full bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none rounded-xl text-my-blue shadow-xl"> Моя команда </button><button class="w-full bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none rounded-xl text-my-blue shadow-xl"> Dream Builder </button><button class="w-full bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none rounded-xl text-my-blue shadow-xl"> Winner </button><button class="w-full bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none rounded-xl text-my-blue shadow-xl"> Создать отчёт </button><button class="w-full bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none rounded-xl text-my-blue shadow-xl"> Изменить криптовалюту </button><button class="w-full bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none rounded-xl text-my-blue shadow-xl"> Правила вознаграждения </button><button class="w-full bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none rounded-xl text-my-blue shadow-xl"> Закрыть </button></div>',2)]))}var r={name:"DonationScreen"},n=s(1241);const i=(0,n.A)(r,[["render",a]]);var d=i},1300:function(t,e,s){s.r(e),s.d(e,{default:function(){return dt}});var o=s(6768),l=s(4232),a=s(5130),r=s(7057),n=s(9915),i=s(4110);const d={class:"bg-white flex flex-col justify-between shadow-lg max-w-md mx-auto h-screen"},c={key:6,class:"relative map"},u={key:7,class:"flex flex-col justify-center items-center h-full my-bg rounded-t-xl"},h={key:8,class:"flex flex-col justify-between h-full my-bg rounded-t-xl"},p={class:"my-bg rounded-t-xl mt-0 p-5"},b={class:"mt-1 space-y-2"},m={class:"w-full text-start"},f={class:"w-full text-start"},g={class:"hidden payment_options"},x={clas:"bg-white"},y={class:"bg-white p-2 px-5 border-b flex items-center"},v={class:"flex-1 text-start",for:"p5"},_={class:"bg-white p-2 px-5 border-b flex items-center"},k={class:"flex-1 text-start",for:"p1"},w={class:"bg-white p-2 px-5 border-b flex items-center"},$={class:"flex-1 text-start",for:"p2"},L={class:"bg-white p-2 px-5 border-b flex items-center"},O={class:"flex-1 text-start",for:"p3"},P={class:"bg-white p-2 px-5 border-b flex items-center"},C={class:"flex-1 text-start",for:"p4"},X={class:"mt-4 grid grid-cols-2 gap-2"},E=["onClick"],M={class:"flex items-center justify-between"},T={class:"flex items-center space-x-2"},A=["src"],Q=["checked"],j={key:0,class:"flex items-center justify-between mt-2"},F={key:0,class:"bg-blue-200 rounded px-2 text-black"},I={key:1,class:"bg-blue-200 rounded px-2 text-black"},W={key:0},S={key:2,class:"bg-blue-200 rounded px-2 text-black"},q={key:0},U={key:3,class:"bg-blue-200 rounded px-2 text-black"},V={key:0},H={class:"mt-5 mb-20"},D=["placeholder"],z={key:0,class:"flex space-x-2 font-semibold my-bg p-4 fixed w-full bottom-0"},K=["disabled"],J=["disabled"],N={key:0},Z={key:1,class:"flex flex-col justify-center items-center h-full rounded-t-xl"};function B(t,e,s,B,R,G){const Y=(0,o.g2)("ModalView"),tt=(0,o.g2)("ModalPrompt"),et=(0,o.g2)("ModalAlert"),st=(0,o.g2)("ModalError"),ot=(0,o.g2)("ModalInfo"),lt=(0,o.g2)("ModalSuccess"),at=(0,o.g2)("l-tile-layer"),rt=(0,o.g2)("l-popup"),nt=(0,o.g2)("l-marker"),it=(0,o.g2)("l-map");return(0,o.uX)(),(0,o.CE)("div",d,[this.$store.state.modalOn?((0,o.uX)(),(0,o.Wv)(Y,{key:0})):(0,o.Q3)("",!0),this.$store.state.offer?((0,o.uX)(),(0,o.Wv)(tt,{key:1})):(0,o.Q3)("",!0),this.$store.state.cancel?((0,o.uX)(),(0,o.Wv)(et,{key:2})):(0,o.Q3)("",!0),this.$store.state.error?((0,o.uX)(),(0,o.Wv)(st,{key:3})):(0,o.Q3)("",!0),this.infoModal?((0,o.uX)(),(0,o.Wv)(ot,{key:4})):(0,o.Q3)("",!0),this.$store.state.successModal?((0,o.uX)(),(0,o.Wv)(lt,{key:5})):(0,o.Q3)("",!0),this.$store.state.modalOn||this.$store.state.offer||this.$store.state.successModal||this.$store.state.cancel||!this.$store.state.langLoaded?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",c,[(0,o.bF)(it,{class:"w-full",zoom:this.$store.state.zoom,center:this.$store.getters.midPoint},{default:(0,o.k6)((()=>[(0,o.bF)(at,{url:R.tileLayerUrl,attribution:R.tileLayerAttribution},null,8,["url","attribution"]),(0,o.bF)(nt,{"lat-lng":[this.$store.state.startPoint.lat,this.$store.state.startPoint.lon]},{default:(0,o.k6)((()=>[(0,o.bF)(rt,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(this.$store.state.startPoint.title),1)])),_:1})])),_:1},8,["lat-lng"]),(0,o.bF)(nt,{"lat-lng":[this.$store.state.endPoint.lat,this.$store.state.endPoint.lon]},{default:(0,o.k6)((()=>[(0,o.bF)(rt,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(this.$store.state.endPoint.title),1)])),_:1})])),_:1},8,["lat-lng"])])),_:1},8,["zoom","center"])])),this.$store.state.langLoaded?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",u,e[13]||(e[13]=[(0,o.Lk)("div",{class:"flex items-center justify-center"},[(0,o.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-e-4 border-blue-500"})],-1)]))),this.$store.state.langLoaded?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",p,[(0,o.Lk)("div",b,[(0,o.Lk)("div",{onClick:e[0]||(e[0]=()=>{this.$store.state.modalOn=!0,this.$store.state.chooseMode="start"}),class:"flex items-center space-x-3 px-3 py-3 border rounded-md text-sm shadow-sm bg-white cursor-pointer"},[e[14]||(e[14]=(0,o.Lk)("img",{src:r,alt:""},null,-1)),(0,o.Lk)("div",m,(0,l.v_)(this.$store.state.startPoint.title),1)]),(0,o.Lk)("div",{onClick:e[1]||(e[1]=()=>{this.$store.state.modalOn=!0,this.$store.state.chooseMode="end"}),class:"flex items-center space-x-3 px-3 py-2 border rounded-md text-sm shadow-sm bg-white cursor-pointer"},[e[15]||(e[15]=(0,o.Lk)("img",{src:n,alt:""},null,-1)),(0,o.Lk)("div",f,(0,l.v_)(this.endText),1)])]),(0,o.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>G.showPayOptions&&G.showPayOptions(...t)),style:{background:"#89AED0"},class:"p-3 text-white rounded mt-2 w-full font-semibold text-center flex items-center justify-center space-x-2"},[(0,o.Lk)("div",null,(0,l.v_)(this.$store.state.langLoaded.passenger_select_pay_methods),1),e[16]||(e[16]=(0,o.Lk)("img",{src:i,alt:""},null,-1))]),(0,o.Lk)("div",g,[(0,o.Lk)("div",x,[(0,o.Lk)("div",y,[(0,o.Lk)("label",v,(0,l.v_)(this.$store.state.langLoaded.method_any),1),(0,o.bo)((0,o.Lk)("input",{id:"p5",value:"any","onUpdate:modelValue":e[3]||(e[3]=t=>R.selectedPaymentOpts=t),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[a.lH,R.selectedPaymentOpts]])]),(0,o.Lk)("div",_,[(0,o.Lk)("label",k,(0,l.v_)(this.$store.state.langLoaded.method_cash),1),(0,o.bo)((0,o.Lk)("input",{id:"p1",value:"cash","onUpdate:modelValue":e[4]||(e[4]=t=>R.selectedPaymentOpts=t),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[a.lH,R.selectedPaymentOpts]])]),(0,o.Lk)("div",w,[(0,o.Lk)("label",$,(0,l.v_)(this.$store.state.langLoaded.method_card),1),(0,o.bo)((0,o.Lk)("input",{id:"p2",value:"card","onUpdate:modelValue":e[5]||(e[5]=t=>R.selectedPaymentOpts=t),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[a.lH,R.selectedPaymentOpts]])]),(0,o.Lk)("div",L,[(0,o.Lk)("label",O,(0,l.v_)(this.$store.state.langLoaded.method_wallets),1),(0,o.bo)((0,o.Lk)("input",{id:"p3",value:"e-wallets","onUpdate:modelValue":e[6]||(e[6]=t=>R.selectedPaymentOpts=t),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[a.lH,R.selectedPaymentOpts]])]),(0,o.Lk)("div",P,[(0,o.Lk)("label",C,(0,l.v_)(this.$store.state.langLoaded.method_balance),1),(0,o.bo)((0,o.Lk)("input",{id:"p4",value:"balance","onUpdate:modelValue":e[7]||(e[7]=t=>R.selectedPaymentOpts=t),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[a.lH,R.selectedPaymentOpts]])])]),(0,o.Lk)("button",{onClick:e[8]||(e[8]=(...t)=>G.showPayOptions&&G.showPayOptions(...t)),class:"my-blue p-2 text-white rounded rounded-t-none w-full font-semibold text-center flex items-center justify-center space-x-2"},e[17]||(e[17]=[(0,o.Lk)("div",null,"OK",-1)]))]),(0,o.Lk)("div",X,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(R.transportOptions,((t,e)=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>G.selectOption(e),class:(0,l.C4)(["p-2 border rounded-md shadow",G.isSelected(e)?"my-blue text-white":"bg-white"])},[(0,o.Lk)("div",M,[(0,o.Lk)("div",T,[(0,o.Lk)("img",{src:t.icon,alt:""},null,8,A),(0,o.Lk)("div",{class:(0,l.C4)(G.isSelected(e)?"text-lgg font-semibold":"text-lgg")},(0,l.v_)(t.label),3)]),(0,o.Lk)("div",null,[(0,o.Lk)("input",{type:"checkbox",checked:G.isSelected(e),class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200",readonly:""},null,8,Q)])]),this.$store.state.routeInfo?((0,o.uX)(),(0,o.CE)("div",j,[3!==e?((0,o.uX)(),(0,o.CE)("button",F,(0,l.v_)(this.$store.state.routeInfo.estimated_duration_text),1)):(0,o.Q3)("",!0),0==e?((0,o.uX)(),(0,o.CE)("button",I,[(0,o.eW)((0,l.v_)(this.$store.state.routeInfo.transport_type_dict.taxi_price)+" ",1),this.$store.state.offeredPrice?((0,o.uX)(),(0,o.CE)("span",W,(0,l.v_)(this.$store.state.routeInfo.currency_symbol),1)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),1==e?((0,o.uX)(),(0,o.CE)("button",S,[(0,o.eW)((0,l.v_)(this.$store.state.routeInfo.transport_type_dict.private_price)+" ",1),this.$store.state.offeredPrice?((0,o.uX)(),(0,o.CE)("span",q,(0,l.v_)(this.$store.state.routeInfo.currency_symbol),1)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),2==e?((0,o.uX)(),(0,o.CE)("button",U,[(0,o.eW)((0,l.v_)(this.$store.state.routeInfo.transport_type_dict.moto_price)+" ",1),this.$store.state.offeredPrice?((0,o.uX)(),(0,o.CE)("span",V,(0,l.v_)(this.$store.state.routeInfo.currency_symbol),1)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)],10,E)))),128))]),(0,o.Lk)("div",H,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":e[9]||(e[9]=t=>R.commentsForOrder=t),placeholder:this.$store.state.langLoaded.enter_order_comment_btn,class:"w-full px-3 py-2 rounded-md text-sm focus:ring focus:ring-blue-200 focus:outline-none"},null,8,D),[[a.Jo,R.commentsForOrder]])])]),this.$store.state.modalOn?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",z,[(0,o.Lk)("button",{onClick:e[10]||(e[10]=()=>this.$store.state.offer=!0),disabled:G.disabledOffer,class:(0,l.C4)([[G.disabledOffer?"bg-gray-300":"my-blue-2"],"flex-1 p-2 text-sm text-white border shadow-xl rounded-xl"])},(0,l.v_)(this.$store.state.langLoaded.offer_price_btn),11,K),(0,o.Lk)("button",{onClick:e[11]||(e[11]=(...t)=>G.createOrder&&G.createOrder(...t)),disabled:G.disabledOrder,class:(0,l.C4)([[G.disabledOrder?"bg-gray-300":"my-blue"],"flex-1 p-2 text-sm text-white rounded-xl shadow-xl my-blue"])},[this.creatingOrder?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",N,(0,l.v_)(this.$store.state.langLoaded.confirm_order_btn),1)),this.creatingOrder?((0,o.uX)(),(0,o.CE)("div",Z,e[18]||(e[18]=[(0,o.Lk)("div",{class:"flex items-center justify-center"},[(0,o.Lk)("div",{class:"animate-spin rounded-full h-10 w-10 border-t-4 border-e-4 border-white"})],-1)]))):(0,o.Q3)("",!0)],10,J),(0,o.Lk)("button",{onClick:e[12]||(e[12]=()=>this.$store.state.cancel=!0),class:"flex-1 p-2 text-sm text-white rounded-xl shadow-xl hover:bg-red-600 my-red"},(0,l.v_)(this.$store.state.langLoaded.cancel_order_btn),1)]))])):(0,o.Q3)("",!0)])}s(4114),s(8992),s(4520),s(3949);var R=s(6587),G=s.n(R),Y=s(7155),tt=s(729),et=s(9956),st=s(9273),ot=s(1179),lt=s(8827),at=s(4373),rt={name:"TaxiOrderComponent",components:{LMap:lt.Do,LTileLayer:lt.a,LMarker:lt.li,LPopup:lt.nA,LPolyline:lt.vc,ModalView:Y.A,ModalAlert:tt.A,ModalPrompt:st.A,ModalSuccess:ot.A,ModalError:et.A},data(){return{selectedOptions:[],infoModal:!1,timeIsUp:!1,selectedTransports:[],selectedPaymentOpts:[],commentsForOrder:"",creatingOrder:!1,tileLayerUrl:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerAttribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',transportOptions:[{label:"taxi",value:"taxi",icon:s(9820),details:{sum:"234 грн",time:"15 мин"}},{label:"private",value:"private",icon:s(5227),details:{sum:"234 грн",time:"15 мин"}},{label:"moto",value:"moto",icon:s(5065),details:{sum:"234 грн",time:"15 мин"}},{label:"taxi",value:"taxi",icon:s(364),note:"Отметить все виды транспорта"}]}},computed:{disabledOffer(){return this.$store.state.routeInfo?.transport_type_dict.taxi_price?0:1},disabledOrder(){return 0===this.selectedPaymentOpts.length||0===this.selectedTransports.length||this.$store.state.startPoint.title===this.$store.state.langLoaded.enter_address_from},endText(){return this.$store.state.startPoint.title==this.$store.state.langLoaded.enter_address_from?this.$store.state.langLoaded.enter_address_to:this.$store.state.endPoint.title},routeCoordinates(){const t=this.$store.state.startPoint,e=this.$store.state.endPoint;return t&&e&&t.lat&&t.lon&&e.lat&&e.lon?(console.log([[t.lat,t.lon],[e.lat,e.lon]]),[[t.lat,t.lon],[e.lat,e.lon]]):(console.error("Start or End point coordinates are missing"),[])},finalOrderData(){return this.$store.state.offeredPrice?{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id,place_id_from:this.$store.state.startPoint.place_id,place_id_to:this.$store.state.endPoint.place_id,passenger_pay_methods:this.selectedPaymentOpts,passenger_transport_type:this.selectedTransports,comment:this.commentsForOrder,price:this.$store.state.offeredPrice}:{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id,place_id_from:this.$store.state.startPoint.place_id,place_id_to:this.$store.state.endPoint.place_id,passenger_pay_methods:this.selectedPaymentOpts,passenger_transport_type:this.selectedTransports,comment:this.commentsForOrder}}},async mounted(){console.log(this.disabledOrder),await this.preCheck(),console.log("now"),console.log(this.$store.state.endPoint)},watch:{"$store.state.startPoint":{handler(t,e){console.log(`startPoint changed from ${e} to ${t}`)},immediate:!0},"$store.state.endPoint":{handler(t,e){console.log(`endPoint changed from ${e} to ${t}`),G()(".payment_options").slideToggle()},immediate:!0},selectedPaymentOpts:{handler(t,e){console.log(`after payment changed from ${e} to ${t}`);const s=t.includes("any"),o=e.includes("any"),l=o&&!s;l&&5==e.length?0!==this.selectedPaymentOpts.length&&(this.selectedPaymentOpts=[]):(!o&&s&&5!==t.length?this.selectedPaymentOpts=["any","cash","e-wallets","card","balance"]:s&&t.length<5&&(console.log("inside my block !"),this.selectedPaymentOpts=this.selectedPaymentOpts.filter((t=>"any"!==t))),s||4!=t.length||(this.selectedPaymentOpts=["any","cash","e-wallets","card","balance"]),console.log(`after payment changed from ${e} to ${t}`))},deep:!0,immediate:!1}},methods:{showPayOptions(){G()(".payment_options").slideToggle()},selectOption(t){console.log(this.selectOptions),this.selectedOptions||(this.selectedOptions=[]);const e=this.selectedOptions.indexOf(t);-1===e?(this.selectedOptions.push(t),3==t&&this.selectedOptions.push(0,1,2)):(this.selectedOptions.splice(e,1),3==t&&(this.selectedOptions=this.selectedOptions.filter((t=>![0,1,2].includes(t))))),this.selectedTransports=[],this.selectedOptions.forEach((t=>{this.selectedTransports.push(this.transportOptions[t].value)})),console.log(this.selectedTransports)},async preCheck(){const t=await at.A.post("https://server.telegramtaxi.com/api/check-order/",{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id});this.$store.state.recentLocation=t.data.predefined_place_id_from,console.log(t),200!==t.status?this.infoModal=!0:(this.$store.state.langLoaded=t.data.lang_text,this.transportOptions[0].label=this.$store.state.langLoaded.transport_taxi,this.transportOptions[1].label=this.$store.state.langLoaded.transport_private,this.transportOptions[2].label=this.$store.state.langLoaded.transport_moto,this.transportOptions[3].label=this.$store.state.langLoaded.transport_all,this.calcDetails())},async calcDetails(){console.log("getting details..."),console.log(this.$store.state.startPoint),console.log(this.$store.state.endPoint);const t=await at.A.post("https://server.telegramtaxi.com/api/pre-order/",{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id,place_id_from:this.$store.state.startPoint.place_id,place_id_to:this.$store.state.endPoint.place_id});console.log(t.data),this.$store.state.routeInfo=t.data,this.$store.state.zoom=this.setNeededZoom(),G()(".payment_options").slideToggle()},setNeededZoom(){let t=this.$store.state.routeInfo.total_distance;console.log(t);let e=-1.83*Math.log(t)+28.19;return console.log(e),e},isSelected(t){return this.selectedOptions.includes(t)},async createOrder(){console.log(this.selectedPaymentOpts),this.creatingOrder=!0;try{const t=await at.A.post("https://server.telegramtaxi.com/api/create-order/",this.finalOrderData);"ok"==t.data.status?(this.$store.state.successModal=!0,this.$store.state.successMessage=t.data.message,this.creatingOrder=!1):(this.creatingOrder=!1,this.$store.state.error=!0)}catch(t){this.creatingOrder=!1,this.$store.state.error=!0,this.$store.state.errorText=t.message,console.log(this.$store.errorText)}}}},nt=s(1241);const it=(0,nt.A)(rt,[["render",B]]);var dt=it},8723:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var o=s(6768);const l={class:"cover font-bold min-h-screen flex flex-col items-center justify-center gap-4 p-4"};function a(t,e,s,a,r,n){return(0,o.uX)(),(0,o.CE)("div",l,e[0]||(e[0]=[(0,o.Lk)("div",{class:"scroll space-y-4 text-xl text-start text-white font-semibold p-4"},[(0,o.Lk)("p",null," Правила для того, чтобы обеспечить взаимное уважение между пассажиром и водителем, а также защитить их права и интересы. "),(0,o.Lk)("p",null," Водители, старайтесь сообщать время прибытия. Пассажиры рассчитывают на вашу пунктуальность. Будьте вежливы и помните, что вы оказываете услугу.  Хороший сервис = положительные отзывы + высокие чаевые! "),(0,o.Lk)("p",null," Пассажиры,не подводите! Будьте пунктуальны, не заставляйте себя ждать. Уважайте время водителя. Во время поездки соблюдайте правила и порядки, принятые в данном транспорте! ")],-1)]))}var r={name:"Rules"},n=s(1241);const i=(0,n.A)(r,[["render",a]]);var d=i},6673:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var o=s(6768);const l={class:"cover font-bold min-h-screen flex flex-col items-center justify-center gap-4 p-4"};function a(t,e,s,a,r,n){return(0,o.uX)(),(0,o.CE)("div",l,e[0]||(e[0]=[(0,o.Fv)('<button class="w-full max-w-md bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl rounded-2xl"> Изменить аватарку </button><button class="w-full max-w-md bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl rounded-2xl"> Добавить фамилию </button><button class="w-full max-w-md bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl rounded-2xl"> Изменить язык - Change language </button><button class="w-full max-w-md bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl rounded-2xl"> Изменить регион/валюту </button><button class="w-full max-w-md bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl rounded-2xl"> Информация о себе </button><button class="w-full max-w-md bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl rounded-2xl"> Изменить статус на водителя </button><button class="w-full max-w-md bg-white text-lg font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl rounded-2xl"> Закрыть </button>',7)]))}var r={name:"Settings"},n=s(1241);const i=(0,n.A)(r,[["render",a]]);var d=i},4582:function(t,e,s){s.r(e),s.d(e,{default:function(){return dt}});var o=s(6768),l=s(4232),a=s(5130),r=s(7057),n=s(9915),i=s(4110);const d={class:"bg-white flex flex-col justify-between shadow-lg max-w-md mx-auto h-screen"},c={key:6,class:"relative map"},u={key:7,class:"flex flex-col justify-center items-center h-full my-bg rounded-t-xl"},h={key:8,class:"flex flex-col justify-between h-full my-bg rounded-t-xl"},p={class:"my-bg rounded-t-xl mt-0 p-5"},b={class:"mt-1 space-y-2"},m={class:"w-full text-start"},f={class:"w-full text-start"},g={class:"hidden payment_options"},x={clas:"bg-white"},y={class:"bg-white p-2 px-5 border-b flex items-center"},v={class:"flex-1 text-start",for:"p5"},_={class:"bg-white p-2 px-5 border-b flex items-center"},k={class:"flex-1 text-start",for:"p1"},w={class:"bg-white p-2 px-5 border-b flex items-center"},$={class:"flex-1 text-start",for:"p2"},L={class:"bg-white p-2 px-5 border-b flex items-center"},O={class:"flex-1 text-start",for:"p3"},P={class:"bg-white p-2 px-5 border-b flex items-center"},C={class:"flex-1 text-start",for:"p4"},X={class:"mt-4 grid grid-cols-2 gap-2"},E=["onClick"],M={class:"flex items-center justify-between"},T={class:"flex items-center space-x-2"},A=["src"],Q=["checked"],j={key:0,class:"flex items-center justify-between mt-2"},F={key:0,class:"bg-blue-200 rounded px-2 text-black"},I={key:1,class:"bg-blue-200 rounded px-2 text-black"},W={key:0},S={key:2,class:"bg-blue-200 rounded px-2 text-black"},q={key:0},U={key:3,class:"bg-blue-200 rounded px-2 text-black"},V={key:0},H={class:"mt-5 mb-20"},D=["placeholder"],z={key:0,class:"flex space-x-2 font-semibold my-bg p-4 fixed w-full bottom-0"},K=["disabled"],J=["disabled"],N={key:0},Z={key:1,class:"flex flex-col justify-center items-center h-full rounded-t-xl"};function B(t,e,s,B,R,G){const Y=(0,o.g2)("ModalView"),tt=(0,o.g2)("ModalPrompt"),et=(0,o.g2)("ModalAlert"),st=(0,o.g2)("ModalError"),ot=(0,o.g2)("ModalInfo"),lt=(0,o.g2)("ModalSuccess"),at=(0,o.g2)("l-tile-layer"),rt=(0,o.g2)("l-popup"),nt=(0,o.g2)("l-marker"),it=(0,o.g2)("l-map");return(0,o.uX)(),(0,o.CE)("div",d,[this.$store.state.modalOn?((0,o.uX)(),(0,o.Wv)(Y,{key:0})):(0,o.Q3)("",!0),this.$store.state.offer?((0,o.uX)(),(0,o.Wv)(tt,{key:1})):(0,o.Q3)("",!0),this.$store.state.cancel?((0,o.uX)(),(0,o.Wv)(et,{key:2})):(0,o.Q3)("",!0),this.$store.state.error?((0,o.uX)(),(0,o.Wv)(st,{key:3})):(0,o.Q3)("",!0),this.infoModal?((0,o.uX)(),(0,o.Wv)(ot,{key:4})):(0,o.Q3)("",!0),this.$store.state.successModal?((0,o.uX)(),(0,o.Wv)(lt,{key:5})):(0,o.Q3)("",!0),e[19]||(e[19]=(0,o.Lk)("div",{class:"p-3 bg-white text-center font-semibold border-b"}," Тестовый заказ ",-1)),this.$store.state.modalOn||this.$store.state.offer||this.$store.state.successModal||this.$store.state.cancel||!this.$store.state.langLoaded?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",c,[(0,o.bF)(it,{class:"w-full",zoom:this.$store.state.zoom,center:this.$store.getters.midPoint},{default:(0,o.k6)((()=>[(0,o.bF)(at,{url:R.tileLayerUrl,attribution:R.tileLayerAttribution},null,8,["url","attribution"]),(0,o.bF)(nt,{"lat-lng":[this.$store.state.startPoint.lat,this.$store.state.startPoint.lon]},{default:(0,o.k6)((()=>[(0,o.bF)(rt,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(this.$store.state.startPoint.title),1)])),_:1})])),_:1},8,["lat-lng"]),(0,o.bF)(nt,{"lat-lng":[this.$store.state.endPoint.lat,this.$store.state.endPoint.lon]},{default:(0,o.k6)((()=>[(0,o.bF)(rt,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(this.$store.state.endPoint.title),1)])),_:1})])),_:1},8,["lat-lng"])])),_:1},8,["zoom","center"])])),this.$store.state.langLoaded?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",u,e[13]||(e[13]=[(0,o.Lk)("div",{class:"flex items-center justify-center"},[(0,o.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-e-4 border-blue-500"})],-1)]))),this.$store.state.langLoaded?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",p,[(0,o.Lk)("div",b,[(0,o.Lk)("div",{onClick:e[0]||(e[0]=()=>{this.$store.state.modalOn=!0,this.$store.state.chooseMode="start"}),class:"flex items-center space-x-3 px-3 py-3 border rounded-md text-sm shadow-sm bg-white cursor-pointer"},[e[14]||(e[14]=(0,o.Lk)("img",{src:r,alt:""},null,-1)),(0,o.Lk)("div",m,(0,l.v_)(this.$store.state.startPoint.title),1)]),(0,o.Lk)("div",{onClick:e[1]||(e[1]=()=>{this.$store.state.modalOn=!0,this.$store.state.chooseMode="end"}),class:"flex items-center space-x-3 px-3 py-2 border rounded-md text-sm shadow-sm bg-white cursor-pointer"},[e[15]||(e[15]=(0,o.Lk)("img",{src:n,alt:""},null,-1)),(0,o.Lk)("div",f,(0,l.v_)(this.endText),1)])]),(0,o.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>G.showPayOptions&&G.showPayOptions(...t)),style:{background:"#89AED0"},class:"p-3 text-white rounded mt-2 w-full font-semibold text-center flex items-center justify-center space-x-2"},[(0,o.Lk)("div",null,(0,l.v_)(this.$store.state.langLoaded.passenger_select_pay_methods),1),e[16]||(e[16]=(0,o.Lk)("img",{src:i,alt:""},null,-1))]),(0,o.Lk)("div",g,[(0,o.Lk)("div",x,[(0,o.Lk)("div",y,[(0,o.Lk)("label",v,(0,l.v_)(this.$store.state.langLoaded.method_any),1),(0,o.bo)((0,o.Lk)("input",{id:"p5",value:"any","onUpdate:modelValue":e[3]||(e[3]=t=>R.selectedPaymentOpts=t),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[a.lH,R.selectedPaymentOpts]])]),(0,o.Lk)("div",_,[(0,o.Lk)("label",k,(0,l.v_)(this.$store.state.langLoaded.method_cash),1),(0,o.bo)((0,o.Lk)("input",{id:"p1",value:"cash","onUpdate:modelValue":e[4]||(e[4]=t=>R.selectedPaymentOpts=t),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[a.lH,R.selectedPaymentOpts]])]),(0,o.Lk)("div",w,[(0,o.Lk)("label",$,(0,l.v_)(this.$store.state.langLoaded.method_card),1),(0,o.bo)((0,o.Lk)("input",{id:"p2",value:"card","onUpdate:modelValue":e[5]||(e[5]=t=>R.selectedPaymentOpts=t),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[a.lH,R.selectedPaymentOpts]])]),(0,o.Lk)("div",L,[(0,o.Lk)("label",O,(0,l.v_)(this.$store.state.langLoaded.method_wallets),1),(0,o.bo)((0,o.Lk)("input",{id:"p3",value:"e-wallets","onUpdate:modelValue":e[6]||(e[6]=t=>R.selectedPaymentOpts=t),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[a.lH,R.selectedPaymentOpts]])]),(0,o.Lk)("div",P,[(0,o.Lk)("label",C,(0,l.v_)(this.$store.state.langLoaded.method_balance),1),(0,o.bo)((0,o.Lk)("input",{id:"p4",value:"balance","onUpdate:modelValue":e[7]||(e[7]=t=>R.selectedPaymentOpts=t),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[a.lH,R.selectedPaymentOpts]])])]),(0,o.Lk)("button",{onClick:e[8]||(e[8]=(...t)=>G.showPayOptions&&G.showPayOptions(...t)),class:"my-blue p-2 text-white rounded rounded-t-none w-full font-semibold text-center flex items-center justify-center space-x-2"},e[17]||(e[17]=[(0,o.Lk)("div",null,"OK",-1)]))]),(0,o.Lk)("div",X,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(R.transportOptions,((t,e)=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>G.selectOption(e),class:(0,l.C4)(["p-2 border rounded-md shadow",G.isSelected(e)?"my-blue text-white":"bg-white"])},[(0,o.Lk)("div",M,[(0,o.Lk)("div",T,[(0,o.Lk)("img",{src:t.icon,alt:""},null,8,A),(0,o.Lk)("div",{class:(0,l.C4)(G.isSelected(e)?"text-lgg font-semibold":"text-lgg")},(0,l.v_)(t.label),3)]),(0,o.Lk)("div",null,[(0,o.Lk)("input",{type:"checkbox",checked:G.isSelected(e),class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200",readonly:""},null,8,Q)])]),this.$store.state.routeInfo?((0,o.uX)(),(0,o.CE)("div",j,[3!==e?((0,o.uX)(),(0,o.CE)("button",F,(0,l.v_)(this.$store.state.routeInfo.estimated_duration_text),1)):(0,o.Q3)("",!0),0==e?((0,o.uX)(),(0,o.CE)("button",I,[(0,o.eW)((0,l.v_)(this.$store.state.routeInfo.transport_type_dict.taxi_price)+" ",1),this.$store.state.offeredPrice?((0,o.uX)(),(0,o.CE)("span",W,(0,l.v_)(this.$store.state.routeInfo.currency_symbol),1)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),1==e?((0,o.uX)(),(0,o.CE)("button",S,[(0,o.eW)((0,l.v_)(this.$store.state.routeInfo.transport_type_dict.private_price)+" ",1),this.$store.state.offeredPrice?((0,o.uX)(),(0,o.CE)("span",q,(0,l.v_)(this.$store.state.routeInfo.currency_symbol),1)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),2==e?((0,o.uX)(),(0,o.CE)("button",U,[(0,o.eW)((0,l.v_)(this.$store.state.routeInfo.transport_type_dict.moto_price)+" ",1),this.$store.state.offeredPrice?((0,o.uX)(),(0,o.CE)("span",V,(0,l.v_)(this.$store.state.routeInfo.currency_symbol),1)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)],10,E)))),128))]),(0,o.Lk)("div",H,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":e[9]||(e[9]=t=>R.commentsForOrder=t),placeholder:this.$store.state.langLoaded.enter_order_comment_btn,class:"w-full px-3 py-2 rounded-md text-sm focus:ring focus:ring-blue-200 focus:outline-none"},null,8,D),[[a.Jo,R.commentsForOrder]])])]),this.$store.state.modalOn?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",z,[(0,o.Lk)("button",{onClick:e[10]||(e[10]=()=>this.$store.state.offer=!0),disabled:G.disabledOffer,class:(0,l.C4)([[G.disabledOffer?"bg-gray-300":"my-blue-2"],"flex-1 p-2 text-sm text-white border shadow-xl rounded-xl"])},(0,l.v_)(this.$store.state.langLoaded.offer_price_btn),11,K),(0,o.Lk)("button",{onClick:e[11]||(e[11]=(...t)=>G.createOrder&&G.createOrder(...t)),disabled:G.disabledOrder,class:(0,l.C4)([[G.disabledOrder?"bg-gray-300":"my-blue"],"flex-1 p-2 text-sm text-white rounded-xl shadow-xl my-blue"])},[this.creatingOrder?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",N,(0,l.v_)(this.$store.state.langLoaded.confirm_order_btn),1)),this.creatingOrder?((0,o.uX)(),(0,o.CE)("div",Z,e[18]||(e[18]=[(0,o.Lk)("div",{class:"flex items-center justify-center"},[(0,o.Lk)("div",{class:"animate-spin rounded-full h-10 w-10 border-t-4 border-e-4 border-white"})],-1)]))):(0,o.Q3)("",!0)],10,J),(0,o.Lk)("button",{onClick:e[12]||(e[12]=()=>this.$store.state.cancel=!0),class:"flex-1 p-2 text-sm text-white rounded-xl shadow-xl hover:bg-red-600 my-red"},(0,l.v_)(this.$store.state.langLoaded.cancel_order_btn),1)]))])):(0,o.Q3)("",!0)])}s(4114),s(8992),s(4520),s(3949);var R=s(6587),G=s.n(R),Y=s(7155),tt=s(729),et=s(9956),st=s(9273),ot=s(1179),lt=s(8827),at=s(4373),rt={name:"TaxiOrderComponent",components:{LMap:lt.Do,LTileLayer:lt.a,LMarker:lt.li,LPopup:lt.nA,LPolyline:lt.vc,ModalView:Y.A,ModalAlert:tt.A,ModalPrompt:st.A,ModalSuccess:ot.A,ModalError:et.A},data(){return{selectedOptions:[],infoModal:!1,timeIsUp:!1,selectedTransports:[],selectedPaymentOpts:[],commentsForOrder:"",creatingOrder:!1,tileLayerUrl:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerAttribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',transportOptions:[{label:"taxi",value:"taxi",icon:s(9820),details:{sum:"234 грн",time:"15 мин"}},{label:"private",value:"private",icon:s(5227),details:{sum:"234 грн",time:"15 мин"}},{label:"moto",value:"moto",icon:s(5065),details:{sum:"234 грн",time:"15 мин"}},{label:"taxi",value:"taxi",icon:s(364),note:"Отметить все виды транспорта"}]}},computed:{disabledOffer(){return this.$store.state.routeInfo?.transport_type_dict.taxi_price?0:1},disabledOrder(){return 0!==this.selectedPaymentOpts.length&&0!==this.selectedTransports.length&&this.$store.state.startPoint.title!==this.$store.state.langLoaded.enter_address_from?0:1},endText(){return this.$store.state.startPoint.title==this.$store.state.langLoaded.enter_address_from?this.$store.state.langLoaded.enter_address_to:this.$store.state.endPoint.title},routeCoordinates(){const t=this.$store.state.startPoint,e=this.$store.state.endPoint;return t&&e&&t.lat&&t.lon&&e.lat&&e.lon?(console.log([[t.lat,t.lon],[e.lat,e.lon]]),[[t.lat,t.lon],[e.lat,e.lon]]):(console.error("Start or End point coordinates are missing"),[])},finalOrderData(){return this.$store.state.offeredPrice?{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id,place_id_from:this.$store.state.startPoint.place_id,place_id_to:this.$store.state.endPoint.place_id,passenger_pay_methods:this.selectedPaymentOpts,passenger_transport_type:this.selectedTransports,comment:this.commentsForOrder,price:this.$store.state.offeredPrice,is_test_order:!0}:{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id,place_id_from:this.$store.state.startPoint.place_id,place_id_to:this.$store.state.endPoint.place_id,passenger_pay_methods:this.selectedPaymentOpts,passenger_transport_type:this.selectedTransports,comment:this.commentsForOrder,is_test_order:!0}}},async mounted(){await this.preCheck()},watch:{"$store.state.startPoint":{handler(t,e){console.log(`startPoint changed from ${e} to ${t}`)},immediate:!0},"$store.state.endPoint":{handler(t,e){console.log(`endPoint changed from ${e} to ${t}`),G()(".payment_options").slideToggle()},immediate:!0},selectedPaymentOpts:{handler(t,e){console.log(`after payment changed from ${e} to ${t}`);const s=t.includes("any"),o=e.includes("any"),l=o&&!s;l&&5==e.length?0!==this.selectedPaymentOpts.length&&(this.selectedPaymentOpts=[]):(!o&&s&&5!==t.length?this.selectedPaymentOpts=["any","cash","e-wallets","card","balance"]:s&&t.length<5&&(console.log("inside my block !"),this.selectedPaymentOpts=this.selectedPaymentOpts.filter((t=>"any"!==t))),s||4!=t.length||(this.selectedPaymentOpts=["any","cash","e-wallets","card","balance"]),console.log(`after payment changed from ${e} to ${t}`))},deep:!0,immediate:!1}},methods:{showPayOptions(){G()(".payment_options").slideToggle()},selectOption(t){console.log(this.selectOptions),this.selectedOptions||(this.selectedOptions=[]);const e=this.selectedOptions.indexOf(t);-1===e?(this.selectedOptions.push(t),3==t&&this.selectedOptions.push(0,1,2)):(this.selectedOptions.splice(e,1),3==t&&(this.selectedOptions=this.selectedOptions.filter((t=>![0,1,2].includes(t))))),this.selectedTransports=[],this.selectedOptions.forEach((t=>{this.selectedTransports.push(this.transportOptions[t].value)})),console.log(this.selectedTransports)},async preCheck(){const t=await at.A.post("https://server.telegramtaxi.com/api/check-order/",{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id});if(this.$store.state.recentLocation=t.data.predefined_place_id_from,console.log(t),200!==t.status)this.infoModal=!0;else{this.$store.state.langLoaded=t.data.lang_text;let e=this.$store.state.langLoaded.enter_address_from;this.$store.state.startPoint={title:e,lat:t.data.latitude,lon:t.data.longitude},console.log(this.$store.state.startPoint),this.transportOptions[0].label=this.$store.state.langLoaded.transport_taxi,this.transportOptions[1].label=this.$store.state.langLoaded.transport_private,this.transportOptions[2].label=this.$store.state.langLoaded.transport_moto,this.transportOptions[3].label=this.$store.state.langLoaded.transport_all,console.log(this.$store.state.langLoaded)}},isSelected(t){return this.selectedOptions.includes(t)},async createOrder(){console.log(this.selectedPaymentOpts),this.creatingOrder=!0;try{const t=await at.A.post("https://server.telegramtaxi.com/api/create-order/",this.finalOrderData);"ok"==t.data.status?(this.$store.state.successModal=!0,this.$store.state.successMessage=t.data.message,this.creatingOrder=!1):(this.creatingOrder=!1,this.$store.state.error=!0)}catch(t){this.creatingOrder=!1,this.$store.state.error=!0,this.$store.state.errorText=t.message,console.log(this.$store.errorText)}}}},nt=s(1241);const it=(0,nt.A)(rt,[["render",B]]);var dt=it},1095:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var o=s(6768);const l={class:"cover min-h-screen flex flex-col items-center justify-center gap-6 p-6 bg-blue-400"};function a(t,e,s,a,r,n){return(0,o.uX)(),(0,o.CE)("div",l,e[0]||(e[0]=[(0,o.Lk)("div",{class:"text-center"},[(0,o.Lk)("h1",{class:"text-white text-5xl font-bold mb-2"},"Welcome to Telegram Taxi!")],-1),(0,o.Lk)("a",{href:"/order",class:"w-full max-w-md font-bold bg-white text-2xl font-semibold py-4 hover:bg-blue-100 focus:outline-none focus:ring-2 rounded-xl text-my-blue shadow-xl"}," Open ",-1)]))}var r={name:"Welcome"},n=s(1241);const i=(0,n.A)(r,[["render",a]]);var d=i}}]);
//# sourceMappingURL=about.911f32f7.js.map