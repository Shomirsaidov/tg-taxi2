(function(){"use strict";var e={3308:function(e,t,s){var o=s(5130),r=s(6768);function n(e,t){const s=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(s)}var a=s(1241);const l={},i=(0,a.A)(l,[["render",n]]);var d=i,c=s(4458);(0,c.k)("/webapp/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var u=s(1387),p=s(4232),h=s(7057),f=s(9915),m=s(4110);const b={class:"bg-white flex flex-col justify-between shadow-lg max-w-md mx-auto h-screen"},g={key:5,class:"p-3 bg-white text-center font-semibold border-b"},y={key:6,class:"relative map"},x={key:7,class:"flex flex-col justify-center items-center h-full my-bg rounded-t-xl"},v={key:8,class:"flex flex-col justify-between h-full my-bg rounded-t-xl"},k={class:"my-bg rounded-t-xl mt-0 p-5"},_={class:"mt-1 space-y-2"},w={class:"w-full text-start"},L=["disabled"],$={class:"w-full text-start"},A={class:"hidden payment_options"},O={clas:"bg-white"},P={class:"bg-white p-2 px-5 border-b flex items-center"},C={class:"flex-1 text-start",for:"p5"},T={class:"bg-white p-2 px-5 border-b flex items-center"},E={class:"flex-1 text-start",for:"p1"},W={class:"bg-white p-2 px-5 border-b flex items-center"},M={class:"flex-1 text-start",for:"p2"},j={class:"bg-white p-2 px-5 border-b flex items-center"},X={class:"flex-1 text-start",for:"p3"},S={class:"bg-white p-2 px-5 border-b flex items-center"},I={class:"flex-1 text-start",for:"p4"},Q={class:"mt-4 grid grid-cols-2 gap-2"},F=["onClick"],U={class:"flex items-center justify-between"},V={class:"flex items-center space-x-2"},q=["src"],z=["checked"],N={key:0,class:"flex items-center justify-between mt-2"},B={key:0,class:"bg-blue-200 rounded px-2 text-black"},D={key:1,class:"bg-blue-200 rounded px-2 text-black"},K={key:0},H={key:2,class:"bg-blue-200 rounded px-2 text-black"},J={key:0},R={key:3,class:"bg-blue-200 rounded px-2 text-black"},Y={key:0},G={class:"mt-5 mb-20"},Z=["placeholder"],ee={key:0,class:"flex space-x-2 font-semibold my-bg p-4 fixed w-full bottom-0"},te=["disabled"],se=["disabled"],oe={key:0},re={key:1,class:"flex flex-col justify-center items-center h-full rounded-t-xl"};function ne(e,t,s,n,a,l){const i=(0,r.g2)("ModalView"),d=(0,r.g2)("ModalPrompt"),c=(0,r.g2)("ModalAlert"),u=(0,r.g2)("ModalError"),ne=(0,r.g2)("ModalSuccess"),ae=(0,r.g2)("l-tile-layer"),le=(0,r.g2)("l-popup"),ie=(0,r.g2)("l-marker"),de=(0,r.g2)("l-map");return(0,r.uX)(),(0,r.CE)("div",b,[this.$store.state.modalOn?((0,r.uX)(),(0,r.Wv)(i,{key:0})):(0,r.Q3)("",!0),this.$store.state.offer?((0,r.uX)(),(0,r.Wv)(d,{key:1})):(0,r.Q3)("",!0),this.$store.state.cancel?((0,r.uX)(),(0,r.Wv)(c,{key:2})):(0,r.Q3)("",!0),this.$store.state.error?((0,r.uX)(),(0,r.Wv)(u,{key:3})):(0,r.Q3)("",!0),this.$store.state.successModal?((0,r.uX)(),(0,r.Wv)(ne,{key:4})):(0,r.Q3)("",!0),l.is_test_order&&this.$store.state.langLoaded?((0,r.uX)(),(0,r.CE)("div",g,(0,p.v_)(this.$store.state.langLoaded.test_order),1)):(0,r.Q3)("",!0),this.$store.state.modalOn||this.$store.state.error||this.$store.state.offer||this.$store.state.successModal||this.$store.state.cancel||!this.$store.state.langLoaded?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",y,[(0,r.bF)(de,{class:"w-full",zoom:this.$store.state.zoom,center:this.$store.getters.midPoint},{default:(0,r.k6)((()=>[(0,r.bF)(ae,{url:a.tileLayerUrl,attribution:a.tileLayerAttribution},null,8,["url","attribution"]),(0,r.bF)(ie,{"lat-lng":[this.$store.state.startPoint.lat,this.$store.state.startPoint.lon]},{default:(0,r.k6)((()=>[(0,r.bF)(le,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,p.v_)(this.$store.state.startPoint.title),1)])),_:1})])),_:1},8,["lat-lng"]),(0,r.bF)(ie,{"lat-lng":[this.$store.state.endPoint.lat,this.$store.state.endPoint.lon]},{default:(0,r.k6)((()=>[(0,r.bF)(le,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,p.v_)(this.$store.state.endPoint.title),1)])),_:1})])),_:1},8,["lat-lng"])])),_:1},8,["zoom","center"])])),this.$store.state.langLoaded?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",x,t[13]||(t[13]=[(0,r.Lk)("div",{class:"flex items-center justify-center"},[(0,r.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-e-4 border-blue-500"})],-1)]))),this.$store.state.langLoaded?((0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("div",k,[(0,r.Lk)("div",_,[(0,r.Lk)("div",{onClick:t[0]||(t[0]=()=>{this.$store.state.modalOn=!0,this.$store.state.chooseMode="start"}),class:"flex items-center space-x-3 px-3 py-3 border rounded-md text-sm shadow-sm bg-white cursor-pointer"},[t[14]||(t[14]=(0,r.Lk)("img",{src:h,alt:""},null,-1)),(0,r.Lk)("div",w,(0,p.v_)(this.$store.state.startPoint.title),1)]),(0,r.Lk)("button",{disabled:l.disabledEndSelecion,onClick:t[1]||(t[1]=()=>{this.$store.state.modalOn=!0,this.$store.state.chooseMode="end"}),class:(0,p.C4)([[l.disabledEndSelecion?"bg-gray-200 text-gray-400":"bg-white"],"flex w-full items-center space-x-3 px-3 py-2 border rtl:space-x-reverse rounded-md text-sm shadow-sm cursor-pointer"])},[t[15]||(t[15]=(0,r.Lk)("img",{src:f,alt:""},null,-1)),(0,r.Lk)("div",$,(0,p.v_)(this.endText),1)],10,L)]),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.showPayOptions&&l.showPayOptions(...e)),style:{background:"#89AED0"},class:"p-3 text-white rounded mt-2 w-full font-semibold text-center flex items-center justify-center space-x-2"},[(0,r.Lk)("div",null,(0,p.v_)(this.$store.state.langLoaded.passenger_select_pay_methods),1),t[16]||(t[16]=(0,r.Lk)("img",{src:m,alt:""},null,-1))]),(0,r.Lk)("div",A,[(0,r.Lk)("div",O,[(0,r.Lk)("div",P,[(0,r.Lk)("label",C,(0,p.v_)(this.$store.state.langLoaded.method_any),1),(0,r.bo)((0,r.Lk)("input",{id:"p5",value:"any","onUpdate:modelValue":t[3]||(t[3]=e=>a.selectedPaymentOpts=e),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[o.lH,a.selectedPaymentOpts]])]),(0,r.Lk)("div",T,[(0,r.Lk)("label",E,(0,p.v_)(this.$store.state.langLoaded.method_cash),1),(0,r.bo)((0,r.Lk)("input",{id:"p1",value:"cash","onUpdate:modelValue":t[4]||(t[4]=e=>a.selectedPaymentOpts=e),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[o.lH,a.selectedPaymentOpts]])]),(0,r.Lk)("div",W,[(0,r.Lk)("label",M,(0,p.v_)(this.$store.state.langLoaded.method_card),1),(0,r.bo)((0,r.Lk)("input",{id:"p2",value:"card","onUpdate:modelValue":t[5]||(t[5]=e=>a.selectedPaymentOpts=e),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[o.lH,a.selectedPaymentOpts]])]),(0,r.Lk)("div",j,[(0,r.Lk)("label",X,(0,p.v_)(this.$store.state.langLoaded.method_wallets),1),(0,r.bo)((0,r.Lk)("input",{id:"p3",value:"e-wallets","onUpdate:modelValue":t[6]||(t[6]=e=>a.selectedPaymentOpts=e),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[o.lH,a.selectedPaymentOpts]])]),(0,r.Lk)("div",S,[(0,r.Lk)("label",I,(0,p.v_)(this.$store.state.langLoaded.method_balance),1),(0,r.bo)((0,r.Lk)("input",{id:"p4",value:"balance","onUpdate:modelValue":t[7]||(t[7]=e=>a.selectedPaymentOpts=e),type:"checkbox",class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200"},null,512),[[o.lH,a.selectedPaymentOpts]])])]),(0,r.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>l.showPayOptions&&l.showPayOptions(...e)),class:"my-blue p-2 text-white rounded rounded-t-none w-full font-semibold text-center flex items-center justify-center space-x-2"},t[17]||(t[17]=[(0,r.Lk)("div",null,"OK",-1)]))]),(0,r.Lk)("div",Q,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.transportOptions,((e,t)=>((0,r.uX)(),(0,r.CE)("button",{key:t,onClick:e=>l.selectOption(t),class:(0,p.C4)(["p-2 border rounded-md shadow",l.isSelected(t)?"my-blue text-white":"bg-white"])},[(0,r.Lk)("div",U,[(0,r.Lk)("div",V,[(0,r.Lk)("img",{src:e.icon,alt:""},null,8,q),(0,r.Lk)("div",{class:(0,p.C4)(l.isSelected(t)?"text-lgg font-semibold":"text-lgg")},(0,p.v_)(e.label),3)]),(0,r.Lk)("div",null,[(0,r.Lk)("input",{type:"checkbox",checked:l.isSelected(t),class:"h-6 w-6 text-blue-600 rounded focus:ring focus:ring-blue-200",readonly:""},null,8,z)])]),this.$store.state.routeInfo?((0,r.uX)(),(0,r.CE)("div",N,[3!==t?((0,r.uX)(),(0,r.CE)("button",B,(0,p.v_)(this.$store.state.routeInfo.estimated_duration_text),1)):(0,r.Q3)("",!0),0==t?((0,r.uX)(),(0,r.CE)("button",D,[(0,r.eW)((0,p.v_)(this.$store.state.routeInfo.transport_type_dict.taxi_price)+" ",1),this.$store.state.offeredPrice?((0,r.uX)(),(0,r.CE)("span",K,(0,p.v_)(this.$store.state.routeInfo.currency_symbol),1)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),1==t?((0,r.uX)(),(0,r.CE)("button",H,[(0,r.eW)((0,p.v_)(this.$store.state.routeInfo.transport_type_dict.private_price)+" ",1),this.$store.state.offeredPrice?((0,r.uX)(),(0,r.CE)("span",J,(0,p.v_)(this.$store.state.routeInfo.currency_symbol),1)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),2==t?((0,r.uX)(),(0,r.CE)("button",R,[(0,r.eW)((0,p.v_)(this.$store.state.routeInfo.transport_type_dict.moto_price)+" ",1),this.$store.state.offeredPrice?((0,r.uX)(),(0,r.CE)("span",Y,(0,p.v_)(this.$store.state.routeInfo.currency_symbol),1)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)],10,F)))),128))]),(0,r.Lk)("div",G,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[9]||(t[9]=e=>a.commentsForOrder=e),placeholder:this.$store.state.langLoaded.enter_order_comment_btn,class:"w-full px-3 py-2 rounded-md text-sm focus:ring focus:ring-blue-200 focus:outline-none"},null,8,Z),[[o.Jo,a.commentsForOrder]])])]),this.$store.state.modalOn?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",ee,[(0,r.Lk)("button",{onClick:t[10]||(t[10]=()=>this.$store.state.offer=!0),disabled:l.disabledOffer,class:(0,p.C4)([[l.disabledOffer?"bg-gray-300":"my-blue-2"],"flex-1 p-2 text-sm text-white border shadow-xl rounded-xl"])},(0,p.v_)(this.$store.state.langLoaded.offer_price_btn),11,te),(0,r.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>l.createOrder&&l.createOrder(...e)),disabled:l.disabledOrder,class:(0,p.C4)([[l.disabledOrder?"bg-gray-300":"my-blue"],"flex-1 p-2 text-sm text-white rounded-xl shadow-xl my-blue"])},[this.creatingOrder?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("span",oe,(0,p.v_)(this.$store.state.langLoaded.confirm_order_btn),1)),this.creatingOrder?((0,r.uX)(),(0,r.CE)("div",re,t[18]||(t[18]=[(0,r.Lk)("div",{class:"flex items-center justify-center"},[(0,r.Lk)("div",{class:"animate-spin rounded-full h-10 w-10 border-t-4 border-e-4 border-white"})],-1)]))):(0,r.Q3)("",!0)],10,se),(0,r.Lk)("button",{onClick:t[12]||(t[12]=()=>this.$store.state.cancel=!0),class:"flex-1 p-2 text-sm text-white rounded-xl shadow-xl hover:bg-red-600 my-red"},(0,p.v_)(this.$store.state.langLoaded.cancel_order_btn),1)]))])):(0,r.Q3)("",!0)])}s(4114),s(8992),s(4520),s(3949),s(7550);var ae=s(6587),le=s.n(ae),ie=s(7155),de=s(729),ce=s(9956),ue=s(9273),pe=s(1179),he=s(8827),fe=s(4373),me={name:"TaxiOrderComponent",components:{LMap:he.Do,LTileLayer:he.a,LMarker:he.li,LPopup:he.nA,LPolyline:he.vc,ModalView:ie.A,ModalAlert:de.A,ModalPrompt:ue.A,ModalSuccess:pe.A,ModalError:ce.A},data(){return{selectedOptions:[],infoModal:!1,timeIsUp:!1,selectedTransports:[],selectedPaymentOpts:[],commentsForOrder:"",creatingOrder:!1,tileLayerUrl:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerAttribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',transportOptions:[{label:"taxi",value:"taxi",icon:s(9820),details:{sum:"234 грн",time:"15 мин"}},{label:"private",value:"private",icon:s(5227),details:{sum:"234 грн",time:"15 мин"}},{label:"moto",value:"moto",icon:s(5065),details:{sum:"234 грн",time:"15 мин"}},{label:"taxi",value:"taxi",icon:s(364),note:"Отметить все виды транспорта"}]}},computed:{is_test_order(){return"true"==this.$route.query.is_test},disabledEndSelecion(){return this.$store.state.startPoint.title==this.$store.state.langLoaded.enter_address_from},disabledOffer(){return this.$store.state.routeInfo?.transport_type_dict.taxi_price?0:1},disabledOrder(){return 0!==this.selectedPaymentOpts.length&&0!==this.selectedTransports.length&&this.$store.state.startPoint.title!==this.$store.state.langLoaded.enter_address_from?0:1},endText(){return this.$store.state.startPoint.title==this.$store.state.langLoaded.enter_address_from?this.$store.state.langLoaded.enter_address_to:this.$store.state.endPoint.title},routeCoordinates(){const e=this.$store.state.startPoint,t=this.$store.state.endPoint;return e&&t&&e.lat&&e.lon&&t.lat&&t.lon?(console.log([[e.lat,e.lon],[t.lat,t.lon]]),[[e.lat,e.lon],[t.lat,t.lon]]):(console.error("Start or End point coordinates are missing"),[])},finalOrderData(){return this.$store.state.offeredPrice?{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id,place_id_from:this.$store.state.startPoint.place_id,place_id_to:this.$store.state.endPoint.place_id,passenger_pay_methods:this.selectedPaymentOpts,passenger_transport_type:this.selectedTransports,comment:this.commentsForOrder,price:this.$store.state.offeredPrice,is_test:this.is_test_order}:{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id,place_id_from:this.$store.state.startPoint.place_id,place_id_to:this.$store.state.endPoint.place_id,passenger_pay_methods:this.selectedPaymentOpts,passenger_transport_type:this.selectedTransports,comment:this.commentsForOrder,is_test:this.is_test_order}}},async mounted(){await this.preCheck();const e=parseInt(this.$route.query.lang_id),t=[4,10];console.log(e),t.includes(e)?(document.documentElement.setAttribute("dir","rtl"),document.body.classList.add("rtl"),console.log("the arabic or hebrew detected !"),document.querySelectorAll(".flex").forEach((e=>{[...e.classList].some((e=>e.startsWith("space-x-")))&&e.classList.add("space-x-reverse")}))):(document.documentElement.setAttribute("dir","ltr"),document.body.classList.remove("rtl"))},watch:{"$store.state.startPoint":{handler(e,t){console.log(`startPoint changed from ${t} to ${e}`)},immediate:!0},"$store.state.endPoint":{handler(e,t){console.log(`endPoint changed from ${t} to ${e}`),le()(".payment_options").slideToggle()},immediate:!0},selectedPaymentOpts:{handler(e,t){console.log(`after payment changed from ${t} to ${e}`);const s=e.includes("any"),o=t.includes("any"),r=o&&!s;r&&5==t.length?0!==this.selectedPaymentOpts.length&&(this.selectedPaymentOpts=[]):(!o&&s&&5!==e.length?this.selectedPaymentOpts=["any","cash","e-wallets","card","balance"]:s&&e.length<5&&(console.log("inside my block !"),this.selectedPaymentOpts=this.selectedPaymentOpts.filter((e=>"any"!==e))),s||4!=e.length||(this.selectedPaymentOpts=["any","cash","e-wallets","card","balance"]),console.log(`after payment changed from ${t} to ${e}`))},deep:!0,immediate:!1}},methods:{showPayOptions(){le()(".payment_options").slideToggle()},selectOption(e){console.log(this.selectOptions),this.selectedOptions||(this.selectedOptions=[]);const t=this.selectedOptions.indexOf(e);-1===t?(this.selectedOptions.push(e),3==e&&this.selectedOptions.push(0,1,2)):(this.selectedOptions.splice(t,1),3==e&&(this.selectedOptions=this.selectedOptions.filter((e=>![0,1,2].includes(e))))),this.selectedTransports=[],this.selectedOptions.forEach((e=>{this.selectedTransports.push(this.transportOptions[e].value)})),console.log(this.selectedTransports)},async preCheck(){const e=await fe.A.post("https://server.telegramtaxi.com/api/check-order/",{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id});if(this.$store.state.recentLocation=e.data.predefined_place_id_from,console.log(e),"error"==e.data.status)console.error("some error"),this.$store.state.error=!0,this.$store.state.errorText=e.data.message;else{this.$store.state.langLoaded=e.data.lang_text;let t=this.$store.state.langLoaded.enter_address_from;this.$store.state.startPoint={title:t,lat:e.data.latitude,lon:e.data.longitude},this.$store.state.endPoint.title=this.$store.state.langLoaded.enter_address_to,console.log(this.$store.state.startPoint),this.transportOptions[0].label=this.$store.state.langLoaded.transport_taxi,this.transportOptions[1].label=this.$store.state.langLoaded.transport_private,this.transportOptions[2].label=this.$store.state.langLoaded.transport_moto,this.transportOptions[3].label=this.$store.state.langLoaded.transport_all,console.log(this.$store.state.langLoaded)}},isSelected(e){return this.selectedOptions.includes(e)},async createOrder(){console.log(this.selectedPaymentOpts),this.creatingOrder=!0;try{const e=await fe.A.post("https://server.telegramtaxi.com/api/create-order/",this.finalOrderData);"ok"==e.data.status?(this.$store.state.successModal=!0,this.$store.state.successMessage=e.data.message,this.creatingOrder=!1):(this.creatingOrder=!1,this.$store.state.error=!0,this.$store.state.errorText=e.data.status)}catch(e){this.creatingOrder=!1,this.$store.state.error=!0,this.$store.state.errorText=e.message,console.log(this.$store.errorText)}}}};const be=(0,a.A)(me,[["render",ne]]);var ge=be;const ye=[{path:"/",alias:"/welcome",name:"welcome",component:()=>s.e(594).then(s.bind(s,1095))},{path:"/order",name:"order",component:ge},{path:"/about",name:"about",component:()=>s.e(594).then(s.bind(s,6228))},{path:"/history",name:"history",component:()=>s.e(594).then(s.bind(s,9527))},{path:"/settings",name:"settings",component:()=>s.e(594).then(s.bind(s,6673))},{path:"/donate",name:"donate",component:()=>s.e(594).then(s.bind(s,2537))},{path:"/promote",name:"promote",component:()=>s.e(594).then(s.bind(s,5228))},{path:"/rules",name:"rules",component:()=>s.e(594).then(s.bind(s,8723))},{path:"/repeat",name:"repeatOrder",component:()=>s.e(594).then(s.bind(s,1300))},{path:"/test-order",name:"testOrder",component:()=>s.e(594).then(s.bind(s,4582))},{path:"/ios",name:"apps",component:()=>s.e(594).then(s.bind(s,4071))}],xe=(0,u.aE)({history:(0,u.LA)("/webapp/"),routes:ye});var ve=xe,ke=s(782),_e=(0,ke.y$)({state:{modalOn:0,offer:0,cancel:0,chooseMode:"start",startPoint:{title:"Москва",lat:55.7509544,lon:37.61757549999999},endPoint:{title:"выберите адрес",lat:55.6509544,lon:37.61757549999999},routeInfo:null,langLoaded:null,successMessage:"Ваш заказ принят",successModal:!1,offeredPrice:null,zoom:12,error:!1,errorMessage:""},getters:{midPoint(e){return"start"==e.chooseMode?[e.startPoint.lat,e.startPoint.lon]:[(e.startPoint.lat+e.endPoint.lat)/2,(e.startPoint.lon+e.endPoint.lon)/2]}},mutations:{},actions:{},modules:{}});(0,o.Ef)(d).use(_e).use(ve).mount("#app")},729:function(e,t,s){s.d(t,{A:function(){return m}});var o=s(6768),r=s(4232),n=s(1481);const a={class:"h-screen w-full absolute px-8 top-0 bg-gray-400 z-50 flex justify-center items-center bg-opacity-75 backdrop-blur"},l={class:"border-2 rounded-lg bg-white p-4 space-y-10 pt-4"},i={class:"flex justify-end"},d={class:"text-xl font-bold"},c={class:"flex space-x-2 font-semibold"};function u(e,t,s,u,p,h){return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",l,[(0,o.Lk)("div",i,[(0,o.Lk)("img",{onClick:t[0]||(t[0]=()=>this.$store.state.cancel=!1),src:n,alt:""})]),(0,o.Lk)("h2",d,(0,r.v_)(this.$store.state.langLoaded.cancel_question),1),(0,o.Lk)("div",c,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>h.closeWebApp&&h.closeWebApp(...e)),class:"flex-1 p-3 text-white rounded-xl shadow-xl hover:bg-red-600 my-red"},(0,r.v_)(this.$store.state.langLoaded.cancel_order_btn),1),(0,o.Lk)("button",{onClick:t[2]||(t[2]=()=>this.$store.state.cancel=!1),class:"flex-1 p-3 text-white rounded-xl shadow-xl hover:bg-blue-600 my-blue"},(0,r.v_)(this.$store.state.langLoaded.continue_btn),1)])])])}var p={name:"Modal Alert",mounted(){window.Telegram&&window.Telegram.WebApp&&window.Telegram.WebApp.ready()},methods:{closeWebApp(){window.Telegram&&window.Telegram.WebApp?window.Telegram.WebApp.close():console.error("Ошибка: Telegram WebApp не обнаружен!")}}},h=s(1241);const f=(0,h.A)(p,[["render",u]]);var m=f},9956:function(e,t,s){s.d(t,{A:function(){return m}});var o=s(6768),r=s(4232),n=s(1481);const a={class:"h-screen w-full absolute px-8 top-0 bg-gray-400 z-50 flex justify-center items-center bg-opacity-75 backdrop-blur"},l={class:"border-2 rounded-lg bg-white p-4 space-y-10 pt-4"},i={class:"flex justify-end"},d={class:"text-xl font-bold"},c={class:"flex space-x-2 font-semibold"};function u(e,t,s,u,p,h){return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",l,[(0,o.Lk)("div",i,[(0,o.Lk)("img",{onClick:t[0]||(t[0]=()=>this.$store.state.cancel=!1),src:n,alt:""})]),(0,o.Lk)("h2",d,(0,r.v_)(this.$store.state.errorText),1),(0,o.Lk)("div",c,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>h.closeWebApp&&h.closeWebApp(...e)),class:"flex-1 p-3 text-white rounded-xl shadow-xl hover:bg-red-600 my-red"},(0,r.v_)(this.$store.state.langLoaded?.close_app||"OK"),1)])])])}var p={name:"Modal Alert",props:["q"],mounted(){window.Telegram&&window.Telegram.WebApp&&window.Telegram.WebApp.ready()},methods:{closeWebApp(){window.Telegram&&window.Telegram.WebApp?window.Telegram.WebApp.close():console.error("Ошибка: Telegram WebApp не обнаружен!")}}},h=s(1241);const f=(0,h.A)(p,[["render",u]]);var m=f},9273:function(e,t,s){s.d(t,{A:function(){return y}});var o=s(6768),r=s(4232),n=s(5130),a=s(1481);const l={class:"h-screen w-full absolute px-8 top-0 bg-gray-400 z-50 flex justify-center items-center bg-opacity-75 backdrop-blur"},i={class:"border-2 rounded-lg bg-white p-4 space-y-10 pt-4"},d={class:"flex justify-end"},c={class:"text-start text-xl font-bold"},u={class:"flex items-center"},p={class:"text-my-blue font-bold"},h={class:"flex space-x-2 font-semibold"};function f(e,t,s,f,m,b){return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("div",i,[(0,o.Lk)("div",d,[(0,o.Lk)("img",{onClick:t[0]||(t[0]=()=>this.$store.state.offer=!1),src:a,alt:""})]),(0,o.Lk)("h2",c,(0,r.v_)(this.$store.state.langLoaded.offer_price_btn),1),(0,o.Lk)("div",u,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.localPrice=t),type:"number",class:"p-2 border-2 rounded-xl me-3 outline-none border-blue-400"},null,512),[[n.Jo,e.localPrice]]),(0,o.Lk)("div",p,(0,r.v_)(b.currencySymbol),1)]),(0,o.Lk)("div",h,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>b.offerPrice&&b.offerPrice(...e)),class:"flex-1 p-3 text-white rounded-xl shadow-xl hover:bg-blue-500 my-blue"},(0,r.v_)(this.$store.state.langLoaded.continue_btn),1),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>b.closeWebApp&&b.closeWebApp(...e)),class:"flex-1 p-3 text-white rounded-xl shadow-xl hover:bg-red-600 my-red"},(0,r.v_)(this.$store.state.langLoaded.cancel_order_btn),1)])])])}var m={name:"Modal Alert",data:()=>({localPrice:null}),computed:{currencySymbol(){return this.$store.state.routeInfo?.currency_symbol||"$"}},methods:{offerPrice(){this.$store.state.offeredPrice=this.localPrice,this.$store.state.routeInfo.transport_type_dict.taxi_price=this.$store.state.offeredPrice,this.$store.state.routeInfo.transport_type_dict.private_price=this.$store.state.offeredPrice,this.$store.state.routeInfo.transport_type_dict.moto_price=this.$store.state.offeredPrice,this.$store.state.offer=!1},closeWebApp(){window.Telegram&&window.Telegram.WebApp?window.Telegram.WebApp.close():console.error("Ошибка: Telegram WebApp не обнаружен!")}}},b=s(1241);const g=(0,b.A)(m,[["render",f]]);var y=g},1179:function(e,t,s){s.d(t,{A:function(){return m}});var o=s(6768),r=s(4232),n=s(1481);const a={class:"h-screen w-full absolute px-8 top-0 bg-gray-400 z-50 flex justify-center items-center bg-opacity-75 backdrop-blur"},l={class:"border-2 rounded-lg bg-white p-4 space-y-10 pt-4"},i={class:"flex justify-end"},d={class:"text-xl font-bold"},c={class:"flex space-x-2 font-semibold"};function u(e,t,s,u,p,h){return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",l,[(0,o.Lk)("div",i,[(0,o.Lk)("img",{onClick:t[0]||(t[0]=()=>this.$store.state.successModal=!1),src:n,alt:""})]),(0,o.Lk)("h2",d,(0,r.v_)(this.$store.state.successMessage),1),(0,o.Lk)("div",c,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>h.closeWebApp&&h.closeWebApp(...e)),class:"flex-1 p-3 text-white rounded-xl shadow-xl hover:bg-blue-600 my-blue"},(0,r.v_)(this.$store.state.langLoaded.i_see),1)])])])}var p={name:"Modal Success",mounted(){window.Telegram&&window.Telegram.WebApp&&window.Telegram.WebApp.ready()},methods:{closeWebApp(){window.Telegram&&window.Telegram.WebApp?window.Telegram.WebApp.close():console.error("Ошибка: Telegram WebApp не обнаружен!")}}},h=s(1241);const f=(0,h.A)(p,[["render",u]]);var m=f},7155:function(e,t,s){s.d(t,{A:function(){return L}});var o=s(6768),r=s(5130),n=s(4232),a=s(1481),l=s(9915);const i={class:"h-full w-full absolute top-0 bg-gray-400 z-50 flex justify-center backdrop-blur"},d={class:"border-2 rounded-lg my-bg h-full w-full p-4 space-y-5 pt-10"},c={class:"w-full border-2 px-3 space-x-3 bg-white rounded-lg"},u={class:"flex"},p=["placeholder"],h={class:"text-start font-bold"},f={class:"text-start text-gray-400"},m={key:1,class:"flex items-center mt-4 justify-center"},b=["onClick"],g={class:"text-start"},y={class:"text-start text-gray-400"};function x(e,t,s,x,v,k){return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("div",d,[(0,o.Lk)("div",c,[(0,o.Lk)("div",u,[(0,o.Lk)("img",{onClick:t[0]||(t[0]=()=>this.$store.state.modalOn=!1),width:"17",src:a,alt:""}),(0,o.bo)((0,o.Lk)("input",{placeholder:e.$store.state.langLoaded.enter_address_to,onInput:t[1]||(t[1]=(...e)=>k.updateLocs&&k.updateLocs(...e)),"onUpdate:modelValue":t[2]||(t[2]=t=>e.inpValue=t),class:"text-lg p-3 w-full outline-none font-semibold",type:"text"},null,40,p),[[r.Jo,e.inpValue]])])]),(0,o.Lk)("div",null,[e.inpValue||"start"!=e.$store.state.chooseMode?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:0,class:"flex items-center rtl:space-x-reverse space-x-3 border-b-2 border-gray-300 p-3 cursor-pointer",onClick:t[3]||(t[3]=e=>k.selectPoint(this.$store.state.recentLocation,!0))},[t[4]||(t[4]=(0,o.Lk)("img",{src:l,alt:""},null,-1)),(0,o.Lk)("div",null,[(0,o.Lk)("div",h,(0,n.v_)(this.$store.state.langLoaded.last_location_text),1),(0,o.Lk)("div",f,(0,n.v_)(this.$store.state.recentLocation.full_address),1)])])),0==e.addresses.length?((0,o.uX)(),(0,o.CE)("div",m,t[5]||(t[5]=[(0,o.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-t-4 border-e-4 border-blue-500"},null,-1)]))):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.addresses,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"flex items-center rtl:space-x-reverse space-x-3 border-b-2 border-gray-300 p-3 cursor-pointer",onClick:t=>k.selectPoint(e)},[t[6]||(t[6]=(0,o.Lk)("img",{src:l,alt:""},null,-1)),(0,o.Lk)("div",null,[(0,o.Lk)("div",g,(0,n.v_)(e.title),1),(0,o.Lk)("div",y,(0,n.v_)(e.description),1)])],8,b)))),256))])])])}s(6587);var v=s(4373),k={name:"Modal1",data:()=>({inpValue:"",debounceTimer:null,addresses:[]}),mounted(){this.updateLocs()},methods:{updateLocs(){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((async()=>{console.log("fetching hints...");try{const e=await v.A.post("https://server.telegramtaxi.com/api/get-addresses/",{query:this.inpValue,tg_id:this.$route.query.tg_id});this.addresses=e.data.addresses}catch(e){console.error("Error fetching hints:",e)}}),1500)},async selectPoint(e,t=!1){if("start"==this.$store.state.chooseMode){const s=await v.A.post("https://server.telegramtaxi.com/api/get-place-details/",{place_id:e.place_id,lang_code:"ru"});let o=s.data;o.title=t?o.street+", "+o.city:e.title+", "+o.city,this.$store.state.startPoint=o,console.log(this.$store.state.startPoint)}else{const s=await v.A.post("https://server.telegramtaxi.com/api/get-place-details/",{place_id:e.place_id,lang_code:"ru"});let o=s.data;o.title=t?o.street+", "+o.city:e.title+", "+o.city,this.$store.state.endPoint=o,console.log(this.$store.state.endPoint),await this.calcDetails()}this.$store.state.modalOn=!1},async calcDetails(){console.log("getting details...");const e=await v.A.post("https://server.telegramtaxi.com/api/pre-order/",{uid:this.$route.query.uid,tg_id:this.$route.query.tg_id,place_id_from:this.$store.state.startPoint.place_id,place_id_to:this.$store.state.endPoint.place_id});console.log(e.data),this.$store.state.routeInfo=e.data,this.$store.state.zoom=this.setNeededZoom()},setNeededZoom(){let e=this.$store.state.routeInfo.total_distance;console.log(e);let t=-1.83*Math.log(e)+28.19;return console.log(t),t}}},_=s(1241);const w=(0,_.A)(k,[["render",x]]);var L=w},9820:function(e,t,s){e.exports=s.p+"img/car.3452f769.svg"},1481:function(e,t,s){e.exports=s.p+"img/clear.7521585c.svg"},364:function(e,t,s){e.exports=s.p+"img/clock.cba3c176.svg"},9915:function(e,t,s){e.exports=s.p+"img/location.0bc42a7b.svg"},5065:function(e,t,s){e.exports=s.p+"img/moto.dedfee23.svg"},5227:function(e,t,s){e.exports=s.p+"img/private.f9179ddf.svg"},7057:function(e,t,s){e.exports=s.p+"img/target.6d04cf68.svg"},4110:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAJCAYAAAAGuM1UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABiSURBVHgBjZDRDYAgEEPrJo7kKIzACG6gmzCCIzACI5wlGn7syTUhIfAeNLeYWQWwIpYTFLLF8zzMTQnAefzTTa72A1+fcjxMDtxGFSEVISR3BKLagVkIbS9c3SpC2ruo7m6ICdoaEE+kogAAAABJRU5ErkJggg=="}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,o,r,n){if(!o){var a=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],n=e[c][2];for(var l=!0,i=0;i<o.length;i++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[i])}))?o.splice(i--,1):(l=!1,n<a&&(a=n));if(l){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,r,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,o){return s.f[o](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/about.911f32f7.js"}}(),function(){s.miniCssF=function(e){return"css/about.0214a090.css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="taxi:";s.l=function(o,r,n,a){if(e[o])e[o].push(r);else{var l,i;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+n){l=u;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",t+n),l.src=o),e[o]=[r];var p=function(t,s){l.onerror=l.onload=null,clearTimeout(h);var r=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(e){return e(s)})),t)return t(s)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/webapp/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,r,n){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",s.nc&&(a.nonce=s.nc);var l=function(s){if(a.onerror=a.onload=null,"load"===s.type)r();else{var o=s&&s.type,l=s&&s.target&&s.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+l+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=o,i.request=l,a.parentNode&&a.parentNode.removeChild(a),n(i)}};return a.onerror=a.onload=l,a.href=t,o?o.parentNode.insertBefore(a,o.nextSibling):document.head.appendChild(a),a},t=function(e,t){for(var s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var r=s[o],n=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===e||n===t))return r}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){r=a[o],n=r.getAttribute("data-href");if(n===e||n===t)return r}},o=function(o){return new Promise((function(r,n){var a=s.miniCssF(o),l=s.p+a;if(t(a,l))return r();e(o,l,null,r,n)}))},r={524:0};s.f.miniCss=function(e,t){var s={594:1};r[e]?t.push(r[e]):0!==r[e]&&s[e]&&t.push(r[e]=o(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={524:0};s.f.j=function(t,o){var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var n=new Promise((function(s,o){r=e[t]=[s,o]}));o.push(r[2]=n);var a=s.p+s.u(t),l=new Error,i=function(o){if(s.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var n=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,r[1](l)}};s.l(a,i,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,n,a=o[0],l=o[1],i=o[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(i)var c=i(s)}for(t&&t(o);d<a.length;d++)n=a[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},o=self["webpackChunktaxi"]=self["webpackChunktaxi"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(3308)}));o=s.O(o)})();
//# sourceMappingURL=app.cda9943b.js.map